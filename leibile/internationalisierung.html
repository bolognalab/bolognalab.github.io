<!DOCTYPE HTML>
<!--
	Leitbild Lehre
-->
<html lang="de">
	<head>
		<title>Leitbild Lehre</title>
		<meta charset="utf-8" />
    <meta http-equiv="content-language" content="de">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
 		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
    <link rel="stylesheet" href="../assets/css/leibile.css" /> 
	</head>
	<body class="is-preload">
    <div class="innerWindow">
      <a href='index.html'><img style="width: 100%" alt="Leitbild Lehre der Humboldt-Universität zu Berlin" src="../images/leibile/leitbild-banner_constr.png" /></a>
      <h1>Multiperspektivität und Internationalisierung</h1>
      <div id="decCircle" style="background: #821f71"><img class="mainIcon" src="../images/leibile/internationalisierung.svg"></div>
      <h2>Ansprechpunkte an der HU</h2>
      <p>Um eine zukunftsorientierte Lehre, die Internationalisierung und Multiperspektivität fördert, zu gestalten, wurden folgende Beispiele für vorhandene Ansprechpunkte und Initiativen gesammelt: </p>
      <div class="containerWindow smaller1" style="margin-top: 1em">
        <div id="fadeCover" style="background: #f0f0eb"></div>
        <div class="diagramContainer" id="dCont1">
          <!-- decorative elements -->
          <div id="closeBtn"><p>&#10006;</p></div>
          <!-- <div id="decCircle"><img class="mainIcon" src="../images/leibile/internationalisierung.svg"></div> -->
          <div id="invisibleNode"></div>
          <div id="smallFade"></div>
        </div>
      </div>
    </div>
		<script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script>
      const strukturen = {
        "erster": {
          "intl": {
            "name": "Abteilung Internationales",
            "desc": "<a class='mi' href='https://www.international.hu-berlin.de/de'>Mehr Informationen zur Abteilung Internationales</a>",
            "connections": []
          },
          "sprach": {
            "name": "Sprachzentrum der HU",
            "desc": "<a class='mi' href='https://www.sprachenzentrum.hu-berlin.de/de'>Mehr Informationen zum Sprachzentrum</a>",
            "connections": []
          }
        },
        "zweiter": {
          "kfk": {
            "name": "Kommission Forschung und wissenschaftliche Karrierre*n",
            "desc": "<p>Die <b>Kommission Forschung und wissenschaftliche Karrierre*n (KFK)</b> berät den Akademischen Senat und das Präsidium in allen Fragen, die die Forschung und den wissenschaftlichen Nachwuchs betreffen. Die Kommission ist für Empfehlungen zur Entwicklung und Koordinierung der Forschung, zur Bildung von Forschungsschwerpunkten sowie für grundsätzliche Fragen der Förderung des wissenschaftlichen Nachwuchses zuständig.</p><a href='https://gremien.hu-berlin.de/de/kommissionen/fnk' class='mi'>Mehr Informationen zur KFK</a>",
            "connections": []
          },
          "openhu": {
            "name": "Open Humboldt",
            "subtitle": "Berlin School of Public Engagement and Open Science",
            "desc": "<a class='mi' href='https://open-humboldt.de/de'>Mehr Informationen zu Open Humboldt</a>",
            "connections": []
          }
        }
      }

      // Berechnung der Position der Pünkte
      const dCont1 = document.getElementById("dCont1")
      const closeBtn = document.getElementById("closeBtn")
      var thresholdWidth = 600 // width at which to switch appearance from "mobile" to "desktop"

      var diagramWidth = dCont1.offsetWidth
      var radiusMax = 0.5 * diagramWidth * 0.9
      var activeClass = null
      var openNode = null
      var oldPos
      var inactiveNodeWidth=100, inactiveNodeHeight=100
      var activeNodeWidth = document.getElementById("invisibleNode").offsetWidth, activeNodeHeight = document.getElementById("invisibleNode").offsetHeight
      
      var dC = document.getElementById("decCircle")
      dC.style["top"] = diagramWidth/2 + "px"

      var nodes = {
        "left" : {
          "struktur": "erster",
          "pctWidth": 40,
          "offsetX": 20, // offsets measured in % of container width
          "offsetY": 20
        },
        "right" : {
          "struktur": "zweiter",
          "pctWidth": 40,
          "offsetX": 35,
          "offsetY": 60
        }
      }
      let numgroups = Object.keys(nodes).length

      Object.entries(nodes).forEach(function(nodeEntry, j){
        let category = strukturen[nodeEntry[1]["struktur"]]
        let offsetX = nodeEntry[1]["offsetX"]
        let offsetY = nodeEntry[1]["offsetY"]
        let pctWidth = nodeEntry[1]["pctWidth"]

        let num = Object.keys(category).length
        let posStep = 2*pctWidth/ num

        let posY = offsetY
        
        let thisList = document.createElement("ul")
        thisList.setAttribute("id", nodeEntry[1]["struktur"])
        thisList.setAttribute("aria-label", nodeEntry[1]["struktur"] + " Teil der Liste")
        dCont1.append(thisList)
        Object.entries(category).forEach(function(catEntry, i){
          let posX = offsetX + i*posStep
          
          let thisNode = document.createElement("li")
          thisNode.classList.add("node", nodeEntry[0])

          let x, y
          if (window.innerWidth > thresholdWidth){
            let nodeHeight = 14 
            x = ["7em", "21em"][j]
            y = ["7em", "21em"][i]
            thisNode.style["left"] = x 
            thisNode.style["top"]  = y
          } else {
            let nodeHeight = dCont1.offsetHeight/num 
            x = ["0%", "calc(100% - 2px)"][j]
            y = (nodeHeight/2 - 2.5 + i * dCont1.offsetHeight / num)+"px"
            thisNode.style.height = (nodeHeight-10)+"px"
            thisNode.style["left"] = x 
            thisNode.style["top"]  = y 
          }
          thisNode.setAttribute("id", catEntry[0])
          thisNode.setAttribute("cat", nodeEntry[1]["struktur"])
          thisNode.setAttribute("posX", posX)
          thisNode.setAttribute("posY", posY)
          thisNode.setAttribute("idx", [j,i])
          thisNode.setAttribute("num", num)

          let title = document.createElement("h3")
          title.classList.add("title")
          if (catEntry[1].hasOwnProperty("wordBreak")){
            title.innerHTML = catEntry[1]["wordBreak"]
          } else {
            title.innerHTML = catEntry[1]["name"]
          }
          thisNode.append(title)

          if (catEntry[1].hasOwnProperty("subtitle")){
            let subtitle = document.createElement("h4")
            subtitle.classList.add("subtitle")
            subtitle.innerHTML = catEntry[1]["subtitle"]
            thisNode.append(subtitle)
          }
          

          let details = document.createElement("p")
          details.classList.add("details")
          details.innerHTML = catEntry[1]["desc"]

          
          thisNode.append(details)
          thisList.append(thisNode)
          // dCont1.append(thisNode)
          if (j==0){
          inactiveNodeWidth = thisNode.offsetWidth
          inactiveNodeHeight = thisNode.offsetHeight
        }
        })
      })

    function updateCoordinatesXY(node, x, y){
      node.style["left"] = x + "%"
      node.style["top"] = y + "%"
    }

    // Hover and click effects
    function openNodeW(node){
      let transform = window.getComputedStyle(node)["transform"]
      document.getElementById("fadeCover").style["display"] = "block"
      document.getElementById("fadeCover").style["opacity"] = "0.8"
      openNode = node.id
      node.classList.remove("active")
      node.classList.add("opened")
      let x = node.style["left"]
      let y = node.style["top"]
      

      if (window.innerWidth > thresholdWidth){
        node.style["left"] = (diagramWidth/2)+"px"
        node.style["top"] = "5em"
      } else {
        node.style["left"] = (dCont1.offsetWidth/2) + "px"
        node.style["top"] = "1em"
        node.style["height"] = "fit-content"
      }
      node.style["transform"] = "translate(-50%, 0%)"
      if (window.innerWidth > thresholdWidth){
        // adjust title if word-break version was used
        node.getElementsByClassName("title")[0].innerHTML = strukturen[node.getAttribute("cat")][node.id]["name"]
      } 

      
      dCont1.removeChild(closeBtn)
      node.append(closeBtn)
      setTimeout(function(){
        // closeBtn.style["left"] = "calc("+ (dCont1.offsetWidth/2) + "px + 30% + 1.5em)"
        // closeBtn.style["top"] = (dCont1.offsetHeight/2) + "px"
        closeBtn.style.visibility="visible"
        closeBtn.style.opacity="1"
      }, 500)
      return [x, y, transform]
      }
      
    function closeNodeW(node){
      node.classList.remove("opened")
      node.classList.add("closing")
      node.style["left"] = oldPos[0]
      node.style["top"] = oldPos[1]
      node.style["transform"] = oldPos[2]

      if (!(window.innerWidth > thresholdWidth)){
        node.style["height"] = (dCont1.offsetHeight/node.getAttribute("num")-10)+"px"
        if (node.classList.contains("outer")){
          node.style["transform"] = "translate(0, -50%)"
        }
        if (node.classList.contains("mid")){
          node.style["transform"] = "translate(-50%, -50%)"
        }
        if (node.classList.contains("inner")){
          node.style["transform"] = "translate(-100%, -50%)"
        }
      } else {
        node.style["transform"] = "translate(-50%, -50%)"
      }

      // adjust title if word-break version was used
      if (strukturen[node.getAttribute("cat")][node.id].hasOwnProperty("wordBreak")){
        node.getElementsByClassName("title")[0].innerHTML = strukturen[node.getAttribute("cat")][node.id]["wordBreak"]
      }
      
      document.getElementById("fadeCover").style["opacity"] = "0"
      document.getElementById("fadeCover").style["display"] = "none"
      
      node.removeChild(closeBtn)
      dCont1.appendChild(closeBtn)
      closeBtn.style.visibility="hidden"
      closeBtn.style.opacity="0"
      openNode = null
      setTimeout(function(){
        if (node.classList.contains(activeClass)){
          node.classList.add("active")
        } else {
          node.classList.remove("active")
        }
        setTimeout(function(){
          node.classList.remove("closing")
        },400)
      }, 100)
      }
      
    for (let item of document.getElementsByClassName("node")){
      item.addEventListener("mouseenter", function(){
        console.log("mouseenter")
        if (window.innerWidth > thresholdWidth){
          if (!(item.classList.contains("opened"))){
            item.style["transform"] = "translate(-50%, -50%) scale(110%, 110%)"
          }
        }
      })
      item.addEventListener("mouseleave", function(){
        if (window.innerWidth > thresholdWidth){
          if (!(item.classList.contains("opened"))){
            item.style["transform"] = "translate(-50%, -50%)"
          }
        }
      })
      item.addEventListener("click", function(){
        if (!openNode && !(item.classList.contains("closing"))){
          oldPos = openNodeW(item)
          console.log(oldPos)
        }
      })
    }
    closeBtn.addEventListener("click", function(){
      let nodeToClose = closeBtn.parentElement
      closeNodeW(nodeToClose)
    })

    var n1 = document.getElementsByClassName("left")[1]
    var n0 = document.getElementsByClassName(activeClass)[0]
    var n2 = document.getElementsByClassName(activeClass)[2]
    // position optimization functions
    function getPositionArguments(n){
      let result = {
        "node": n,
        "x": n.style.left.split("px")[0],
        "y": n.style.top.split("px")[0],
        "r": n.getAttribute("r"),
      }
      result["theta_temp"] = Math.acos((result["x"]-diagramWidth/2)/result["r"])
      result["left"] = result["x"] - activeNodeWidth/2
      result["right"] = result["x"] + activeNodeWidth/2
      result["top"] = result["y"] - activeNodeHeight/2
      result["bottom"] = result["y"] + activeNodeHeight/2

      return result
    }

    </script>
	</body>
</html>